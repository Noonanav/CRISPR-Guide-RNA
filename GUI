from tkinter import *
from tkinter.filedialog import askopenfilename
from Bio import SeqIO
from tkinter import messagebox



def Get_Files (Title, Repeat):

    root = Tk()
    Message = "Please select the " + Title + " file"
    More_Seqs = True

    # Add a grid
    mainframe = Frame(root)
    mainframe.grid(column=0,row=0, sticky=(N,W,E,S) )
    mainframe.columnconfigure(0, weight = 1)
    mainframe.rowconfigure(0, weight = 1)
    mainframe.pack(pady = 100, padx = 100)

    if(Repeat):
        Message = "Please select an " + Title + " file"
        More_Seqs = messagebox.askyesno( Title,"Would you like to add Additional Sequences to the genome \n (Such as Plasmids)")
        if not(More_Seqs):
            return 1

    messagebox.showinfo(Title, "Please select the file type")

    # Create a Tkinter variable
    tkvar = StringVar(root)

    # Dictionary with options
    Options = [ "Fasta", "Genebank",]
    tkvar.set('Fasta') # set the default option

    popupMenu = OptionMenu(mainframe, tkvar, *Options)
    Type = "Choose the file type of the " + Title
    Label(mainframe, text= Type).grid(row = 1, column = 1)
    popupMenu.grid(row = 2, column =1)

    def ok():
        root.quit()
        root.withdraw()

    Button2 = Button(root, text="OK", command=ok)
    Button2.pack()

    root.mainloop()

    Filetype = tkvar.get()
    Filetype = Filetype.lower()

    messagebox.showinfo(Title, Message)
    Filename  = askopenfilename()

    File_Info = [ Filename, Filetype ]

    root.withdraw()
    return File_Info


def Get_Sequence():
    Target_Seq_File = Get_Files("Target Sequence", False)
    Genome_Seq_File = Get_Files("Genome Sequence", False)

    Target = SeqIO.read(Target_Seq_File[0], Target_Seq_File[1] )
    Genome = SeqIO.read(Genome_Seq_File[0], Genome_Seq_File[1] )

    Additional_Seq_File = Get_Files("Additional Sequence", True)
    if not(Additional_Seq_File == 1):
        Genome + SeqIO.read(Additional_Seq_File[0], Additional_Seq_File[1] )

    while not (Additional_Seq_File == 1 ):
         Additional_Seq_File = Get_Files("Additional Sequence", True)
         if not(Additional_Seq_File == 1):
             Genome + SeqIO.read(Additional_Seq_File[0], Additional_Seq_File[1] )

         return Target.seq.upper(), Genome.seq.upper()
